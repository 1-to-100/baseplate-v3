# Get list of staged files that match prettier's file patterns
staged_files=$(git diff --cached --name-only --diff-filter=ACM | grep -E '\.(js|jsx|ts|tsx|json|css|scss|md|mdx)$' || true)

# Run prettier on staged files if any match
if [ -n "$staged_files" ]; then
  echo "Running prettier on staged files..."
  echo "$staged_files" | xargs npx prettier --write

  # Stage the prettier fixes
  echo "$staged_files" | xargs git add
fi

# Run type checking
echo "Running type check..."
pnpm type:check

