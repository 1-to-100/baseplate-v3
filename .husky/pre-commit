#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Get list of staged files that match prettier's file patterns
staged_files=$(git diff --cached --name-only --diff-filter=ACM | grep -E '\.(js|jsx|ts|tsx|json|css|scss|md|mdx)$' || true)

# If there are no matching files, exit successfully
if [ -z "$staged_files" ]; then
  exit 0
fi

# Run prettier on staged files
echo "Running prettier on staged files..."
echo "$staged_files" | xargs npx prettier --write

# Stage the prettier fixes
echo "$staged_files" | xargs git add

exit 0
